(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{12:function(e,t,n){var i;function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=r(n);return function(e,t){{if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return X(e)}(this,i?(e=r(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);function i(){}var o=0;return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ee(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function r(e,t){e.split(/\s+/).forEach(function(e){t(e)})}function l(e){return e.normalize("NFKD").replace(t,"").toLowerCase().replace(V,function(e){return T[e]})}function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"|";if(1==e.length)return e[0];var n=1;return e.forEach(function(e){n=Math.max(n,e.length)}),1==n?"["+e.join("")+"]":"(?:"+e.join(t)+")"}function c(n){if(1===n.length)return[[n]];var i=[];return c(n.substring(1)).forEach(function(e){var t=e.slice(0);t[0]=n.charAt(0)+t[0],i.push(t),(t=e.slice(0)).unshift(n.charAt(0)),i.push(t)}),i}function o(e,t){if(e)return e[t]}function s(e,t){if(e){for(var n,i=t.split(".");(n=i.shift())&&(e=e[n]););return e}}function d(e,t,n){var i;return!e||-1===(i=(e+="").search(t.regex))?0:(e=t.string.length/e.length,0===i&&(e+=.5),e*n)}function b(e){return(e+"").replace(/([\$\(-\+\.\?\[-\^\{-\}])/g,"\\$1")}function a(e,t){var n=e[t];if("function"==typeof n)return n;n&&!Array.isArray(n)&&(e[t]=[n])}function f(e,t){return"number"==typeof e&&"number"==typeof t?t<e?1:e<t?-1:0:(e=l(e+"").toLowerCase())>(t=l(t+"").toLowerCase())?1:e<t?-1:0}function h(e){if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(N(e)){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}return document.querySelector(e)}function n(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)}function i(e,t){Object.assign(e.style,t)}function w(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=R(n);(e=H(e)).map(function(t){o.map(function(e){t.classList.add(e)})})}function _(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=R(n);(e=H(e)).map(function(t){o.map(function(e){t.classList.remove(e)})})}function k(e,t,n){if(!n||n.contains(e))for(;e&&e.matches;){if(e.matches(t))return e;e=e.parentNode}}function g(e){return 0<(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)?e[e.length-1]:e[0]}function v(e,t){if(!e)return-1;t=t||e.nodeName;for(var n=0;e=e.previousElementSibling;)e.matches(t)&&n++;return n}function S(n,e){q(e,function(e,t){null==e?n.removeAttribute(t):n.setAttribute(t,""+e)})}function m(e,t){e.parentNode&&e.parentNode.replaceChild(t,e)}function A(e,i){if(null!==i){if("string"==typeof i){if(!i.length)return;i=new RegExp(i,"i")}(function n(e){return 3===e.nodeType?function(e){var t=e.data.match(i);if(t&&0<e.data.length){var n=document.createElement("span");n.className="highlight";e=e.splitText(t.index);e.splitText(t[0].length);t=e.cloneNode(!0);return n.appendChild(t),m(e,n),1}return 0}(e):(function(e){if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var t=0;t<e.childNodes.length;++t)t+=n(e.childNodes[t])}(e),0)})(e)}}function y(e){return"boolean"==typeof e?e?"1":"0":e+""}function O(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function I(t,n,e){var i,o,r=t.trigger,s={},a=Y((t.trigger=function(){var e=arguments[0];if(-1===n.indexOf(e))return r.apply(t,arguments);s[e]=arguments},e.apply(t,[]),t.trigger=r,n));try{for(a.s();!(o=a.n()).done;)(i=o.value)in s&&r.apply(t,s[i])}catch(e){a.e(e)}finally{a.f()}}function C(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];e&&(e.preventDefault(),t&&e.stopPropagation())}function F(e,t,n,i){e.addEventListener(t,n,i)}function x(e,t){return!!t&&!!t[e]&&1==(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0)}function P(e,t){return e.getAttribute("id")||(e.setAttribute("id",t),t)}function L(e){return e.replace(/[\\"']/g,"\\$&")}function E(e,t){t&&e.append(t)}var p,j,e=function(){function e(){Z(this,e),this._events={}}return ee(e,[{key:"on",value:function(e,t){var n=this;r(e,function(e){n._events[e]=n._events[e]||[],n._events[e].push(t)})}},{key:"off",value:function(e,t){var n=this,i=arguments.length;0!==i?r(e,function(e){return 1===i?delete n._events[e]:void(e in n._events!=0&&n._events[e].splice(n._events[e].indexOf(t),1))}):this._events={}}},{key:"trigger",value:function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=this;r(e,function(e){if(e in o._events!=0){var t,n=Y(o._events[e]);try{for(n.s();!(t=n.n()).done;)t.value.apply(o,i)}catch(e){n.e(e)}finally{n.f()}}})}}]),e}(),t=new RegExp("[̀-ͯ·ʾ]","g"),T={"æ":"ae","ⱥ":"a","ø":"o"},V=new RegExp(Object.keys(T).join("|"),"g"),$=[[67,67],[160,160],[192,438],[452,652],[961,961],[1019,1019],[1083,1083],[1281,1289],[1984,1984],[5095,5095],[7429,7441],[7545,7549],[7680,7935],[8580,8580],[9398,9449],[11360,11391],[42792,42793],[42802,42851],[42873,42897],[42912,42922],[64256,64260],[65313,65338],[65345,65370]],q=function(e,t){if(Array.isArray(e))e.forEach(t);else for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},D=function(){function n(e,t){Z(this,n),this.items=e,this.settings=t||{diacritics:!0}}return ee(n,[{key:"tokenize",value:function(e,o,t){var r=this;if(!e||!e.length)return[];var s,a=[],e=e.split(/\s+/);return t&&(s=new RegExp("^("+Object.keys(t).map(b).join("|")+"):(.*)$")),e.forEach(function(e){var t,n=null,i=null;s&&(t=e.match(s))&&(n=t[1],e=t[2]),0<e.length&&(i=b(e),r.settings.diacritics&&(t=i,void 0===j&&(j=function(){var r={};$.forEach(function(e){for(var t=e[0];t<=e[1];t++){var n,i=String.fromCharCode(t),o=l(i);o!=i.toLowerCase()&&(o in r||(r[o]=[o]),n=new RegExp(u(r[o]),"iu"),i.match(n)||r[o].push(i))}});var e=(e=Object.keys(r)).sort(function(e,t){return t.length-e.length});p=new RegExp("("+u(e)+"[̀-ͯ·ʾ]*)","g");var n={};return e.sort(function(e,t){return e.length-t.length}).forEach(function(e){var t=c(e).map(function(e){return e=e.map(function(e){return r.hasOwnProperty(e)?u(r[e]):e}),u(e,"")});n[e]=u(t)}),n}()),i=t.normalize("NFKD").toLowerCase().split(p).map(function(e){if(""==e)return"";var t=l(e);if(j.hasOwnProperty(t))return j[t];t=e.normalize("NFC");return t!=e?u([e,t]):e}).join("")),o&&(i="\\b"+i)),a.push({string:e,regex:i?new RegExp(i,"iu"):null,field:n})}),a}},{key:"getScoreFunction",value:function(e,t){t=this.prepareSearch(e,t);return this._getScoreFunction(t)}},{key:"_getScoreFunction",value:function(e){var o=e.tokens,r=o.length;if(!r)return function(){return 0};var i=e.options.fields,s=e.weights,t=i.length,a=e.getAttrFn;if(!t)return function(){return 1};var l=1===t?function(e,t){var n=i[0].field;return d(a(t,n),e,s[n])}:function(n,i){var e,o=0;return n.field?(e=a(i,n.field),!n.regex&&e?o+=1/t:o+=d(e,n,1)):q(s,function(e,t){o+=d(a(i,t),n,e)}),o/t};return 1===r?function(e){return l(o[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,i=0;n<r;n++){if((t=l(o[n],e))<=0)return 0;i+=t}return i/r}:function(t){var n=0;return q(o,function(e){n+=l(e,t)}),n/r}}},{key:"getSortFunction",value:function(e,t){t=this.prepareSearch(e,t);return this._getSortFunction(t)}},{key:"_getSortFunction",value:function(n){var e,t,i,o=this,r=n.options,s=!n.query&&r.sort_empty?r.sort_empty:r.sort,a=[],l=[];if("function"==typeof s)return s.bind(this);function u(e,t){return"$score"===e?t.score:n.getAttrFn(o.items[t.id],e)}if(s)for(e=0,t=s.length;e<t;e++)!n.query&&"$score"===s[e].field||a.push(s[e]);if(n.query){for(i=!0,e=0,t=a.length;e<t;e++)if("$score"===a[e].field){i=!1;break}i&&a.unshift({field:"$score",direction:"desc"})}else for(e=0,t=a.length;e<t;e++)if("$score"===a[e].field){a.splice(e,1);break}for(e=0,t=a.length;e<t;e++)l.push("desc"===a[e].direction?-1:1);var c=a.length;if(c){if(1!==c)return function(e,t){for(var n,i=0;i<c;i++)if(n=a[i].field,n=l[i]*f(u(n,e),u(n,t)))return n;return 0};var d=a[0].field,p=l[0];return function(e,t){return p*f(u(d,e),u(d,t))}}return null}},{key:"prepareSearch",value:function(e,t){var n,i={},t=Object.assign({},t);return a(t,"sort"),a(t,"sort_empty"),t.fields&&(a(t,"fields"),n=[],t.fields.forEach(function(e){n.push(e="string"==typeof e?{field:e,weight:1}:e),i[e.field]="weight"in e?e.weight:1}),t.fields=n),{options:t,query:e.toLowerCase().trim(),tokens:this.tokenize(e,t.respect_word_boundaries,i),total:0,items:[],weights:i,getAttrFn:t.nesting?s:o}}},{key:"search",value:function(e,n){var i,o=this.prepareSearch(e,n);n=o.options,e=o.query;var r=n.score||this._getScoreFunction(o);e.length?q(this.items,function(e,t){i=r(e),(!1===n.filter||0<i)&&o.items.push({score:i,id:t})}):q(this.items,function(e,t){o.items.push({score:1,id:t})});e=this._getSortFunction(o);return e&&o.items.sort(e),o.total=o.items.length,"number"==typeof n.limit&&(o.items=o.items.slice(0,n.limit)),o}}]),n}(),N=function(e){return"string"==typeof e&&-1<e.indexOf("<")},R=function(e){var t=[];return q(e,function(e){"string"==typeof e&&(e=e.trim().split(/[\11\12\14\15\40]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},H=function(e){return e=!Array.isArray(e)?[e]:e},z="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent)?"metaKey":"ctrlKey",B={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(e){return 0<e.length},render:{}},M=function(e){return null==e?null:y(e)};function K(e,t){var n,o=Object.assign({},B,t),i=o.dataAttr,r=o.labelField,s=o.valueField,a=o.disabledField,l=o.optgroupField,u=o.optgroupLabelField,c=o.optgroupValueField,d=e.tagName.toLowerCase(),p=e.getAttribute("placeholder")||e.getAttribute("data-placeholder");p||o.allowEmptyOption||(n=e.querySelector('option[value=""]'))&&(p=n.textContent);var f,h,g,v,m,y,O={placeholder:p,options:[],optgroups:[],items:[],maxItems:null};return"select"===d?(h=O.options,g={},v=1,m=function(e){var t=Object.assign({},e.dataset),e=i&&t[i];return t="string"==typeof e&&e.length?Object.assign(t,JSON.parse(e)):t},y=function(e,t){var n,i=M(e.value);null!=i&&(i||o.allowEmptyOption)&&(g.hasOwnProperty(i)?t&&((n=g[i][l])?Array.isArray(n)?n.push(t):g[i][l]=[n,t]:g[i][l]=t):((n=m(e))[r]=n[r]||e.textContent,n[s]=n[s]||i,n[a]=n[a]||e.disabled,n[l]=n[l]||t,n.$option=e,g[i]=n,h.push(n)),e.selected&&O.items.push(i))},O.maxItems=e.hasAttribute("multiple")?null:1,q(e.children,function(e){var t,n,i;"optgroup"===(f=e.tagName.toLowerCase())?((i=m(t=e))[u]=i[u]||t.getAttribute("label")||"",i[c]=i[c]||v++,i[a]=i[a]||t.disabled,O.optgroups.push(i),n=i[c],q(t.children,function(e){y(e,n)})):"option"===f&&y(e)})):(d=e.getAttribute(i))?(O.options=JSON.parse(d),q(O.options,function(e){O.items.push(e[s])})):(d=e.value.trim()||"",(o.allowEmptyOption||d.length)&&(d=d.split(o.delimiter),q(d,function(e){var t={};t[r]=e,t[s]=e,O.options.push(t)}),O.items=d)),Object.assign({},B,O,t)}var Q,G=0;return function(e){U(p,e);var d=W(p);function p(e,t){var n;Z(this,p),(n=d.call(this)).order=0,n.isOpen=!1,n.isDisabled=!1,n.isInvalid=!1,n.isValid=!0,n.isLocked=!1,n.isFocused=!1,n.isInputHidden=!1,n.isSetup=!1,n.ignoreFocus=!1,n.hasOptions=!1,n.lastValue="",n.caretPos=0,n.loading=0,n.loadedSearches={},n.activeOption=null,n.activeItems=[],n.optgroups={},n.options={},n.userOptions={},n.items=[],G++;var i=h(e);if(i.tomselect)throw new Error("Tom Select already initialized on this element");i.tomselect=X(n);var o=(window.getComputedStyle&&window.getComputedStyle(i,null)).getPropertyValue("direction"),r=K(i,t);n.settings=r,n.input=i,n.tabIndex=i.tabIndex||0,n.is_select_tag="select"===i.tagName.toLowerCase(),n.rtl=/rtl/i.test(o),n.inputId=P(i,"tomselect-"+G),n.isRequired=i.required,n.sifter=new D(n.options,{diacritics:r.diacritics}),r.mode=r.mode||(1===r.maxItems?"single":"multi"),"boolean"!=typeof r.hideSelected&&(r.hideSelected="multi"===r.mode),"boolean"!=typeof r.hidePlaceholder&&(r.hidePlaceholder="multi"!==r.mode);var s=r.createFilter;"function"!=typeof s&&((s="string"==typeof s?new RegExp(s):s)instanceof RegExp?r.createFilter=function(e){return s.test(e)}:r.createFilter=function(){return!0}),n.initializePlugins(r.plugins),n.setupCallbacks(),n.setupTemplates();var a,l=h("<div>"),u=h("<div>"),c=n._render("dropdown"),e=h('<div role="listbox" tabindex="-1">'),t=n.input.getAttribute("class")||"",o=r.mode;return w(l,r.wrapperClass,t,o),w(u,r.controlClass),E(l,u),w(c,r.dropdownClass,o),r.copyClassesToDropdown&&w(c,t),w(e,r.dropdownContentClass),E(c,e),h(r.dropdownParent||l).appendChild(c),N(r.controlInput)?(a=h(r.controlInput),q(["autocorrect","autocapitalize","autocomplete"],function(e){i.getAttribute(e)&&S(a,J({},e,i.getAttribute(e)))}),a.tabIndex=-1,u.appendChild(a),n.focus_node=a):r.controlInput?(a=h(r.controlInput),n.focus_node=a):(a=h("<input/>"),n.focus_node=u),n.wrapper=l,n.dropdown=c,n.dropdown_content=e,n.control=u,n.control_input=a,n.setup(),n}return ee(p,[{key:"setup",value:function(){var n=this,e=n.settings,i=n.control_input,o=n.dropdown,t=n.dropdown_content,r=n.wrapper,s=n.control,a=n.input,l=n.focus_node,u={passive:!0},c=n.inputId+"-ts-dropdown";S(t,{id:c}),S(l,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":c});var d,p,f,h,g=P(l,n.inputId+"-ts-control"),c="label[for='"+n.inputId.replace(/['"\\]/g,"\\$&")+"']",v=document.querySelector(c),m=n.focus.bind(n);v&&(F(v,"click",m),S(v,{for:g}),d=P(v,n.inputId+"-ts-label"),S(l,{"aria-labelledby":d}),S(t,{"aria-labelledby":d})),r.style.width=a.style.width,n.plugins.names.length&&(d="plugin-"+n.plugins.names.join(" plugin-"),w([r,o],d)),(null===e.maxItems||1<e.maxItems)&&n.is_select_tag&&S(a,{multiple:"multiple"}),n.settings.placeholder&&S(i,{placeholder:e.placeholder}),!n.settings.splitOn&&n.settings.delimiter&&(n.settings.splitOn=new RegExp("\\s*"+b(n.settings.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=(p=e.load,f=e.loadThrottle,function(e,t){var n=this;h&&(n.loading=Math.max(n.loading-1,0),clearTimeout(h)),h=setTimeout(function(){h=null,n.loadedSearches[e]=!0,p.call(n,e,t)},f)})),n.control_input.type=a.type,F(o,"click",function(e){var t=k(e.target,"[data-selectable]");t&&(n.onOptionSelect(e,t),C(e,!0))}),F(s,"click",function(e){var t=k(e.target,"[data-ts-item]",s);t&&n.onItemSelect(e,t)?C(e,!0):""==i.value&&(n.onClick(),C(e,!0))}),F(l,"keydown",function(e){return n.onKeyDown(e)}),F(i,"keypress",function(e){return n.onKeyPress(e)}),F(i,"input",function(e){return n.onInput(e)}),F(l,"resize",function(){return n.positionDropdown()},u),F(l,"blur",function(e){return n.onBlur(e)}),F(l,"focus",function(e){return n.onFocus(e)}),F(l,"paste",function(e){return n.onPaste(e)});function y(e){var t=e.composedPath()[0];if(!r.contains(t)&&!o.contains(t))return n.isFocused&&n.blur(),void n.inputState();t==i&&n.isOpen?e.stopPropagation():C(e,!0)}function O(){n.isOpen&&n.positionDropdown()}F(document,"mousedown",y),F(window,"scroll",O,u),F(window,"resize",O,u),this._destroy=function(){document.removeEventListener("mousedown",y),window.removeEventListener("sroll",O),window.removeEventListener("resize",O),v&&v.removeEventListener("click",m)},this.revertSettings={innerHTML:a.innerHTML,tabIndex:a.tabIndex},a.tabIndex=-1,a.insertAdjacentElement("afterend",n.wrapper),n.sync(!1),e.items=[],delete e.optgroups,delete e.options,F(a,"invalid",function(e){n.isValid&&(n.isValid=!1,n.isInvalid=!0,n.refreshState())}),n.updateOriginalInput(),n.refreshItems(),n.close(!1),n.inputState(),n.isSetup=!0,a.disabled?n.disable():n.enable(),n.on("change",this.onChange),w(a,"tomselected","ts-hidden-accessible"),n.trigger("initialize"),!0===e.preload&&n.preload()}},{key:"setupOptions",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];this.addOptions(e),q(n,function(e){t.registerOptionGroup(e)})}},{key:"setupTemplates",value:function(){var n=this.settings.labelField,i=this.settings.optgroupLabelField;this.settings.render=Object.assign({},{optgroup:function(e){var t=document.createElement("div");return t.className="optgroup",t.appendChild(e.options),t},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,t){return"<div>"+t(e[n])+"</div>"},item:function(e,t){return"<div>"+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"},no_results:function(){return'<div class="no-results">No results found</div>'},loading:function(){return'<div class="spinner"></div>'},not_loading:function(){},dropdown:function(){return"<div></div>"}},this.settings.render)}},{key:"setupCallbacks",value:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)(t=this.settings[n[e]])&&this.on(e,t)}},{key:"sync",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]?K(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(t.options,t.optgroups),e.setValue(t.items,!0),e.lastQuery=null}},{key:"onClick",value:function(){var e=this;if(0<e.activeItems.length)return e.clearActiveItems(),void e.focus();e.isFocused&&e.isOpen?e.blur():e.focus()}},{key:"onMouseDown",value:function(){}},{key:"onChange",value:function(){n(this.input,"input"),n(this.input,"change")}},{key:"onPaste",value:function(e){var t=this;t.isInputHidden||t.isLocked?C(e):t.settings.splitOn&&setTimeout(function(){var e=t.inputValue();e.match(t.settings.splitOn)&&(e=e.trim().split(t.settings.splitOn),q(e,function(e){t.createItem(e)}))},0)}},{key:"onKeyPress",value:function(e){var t=this;if(!t.isLocked){var n=String.fromCharCode(e.keyCode||e.which);return t.settings.create&&"multi"===t.settings.mode&&n===t.settings.delimiter?(t.createItem(),void C(e)):void 0}C(e)}},{key:"onKeyDown",value:function(e){var t,n=this;if(n.isLocked)9!==e.keyCode&&C(e);else{switch(e.keyCode){case 65:if(x(z,e)&&""==n.control_input.value)return C(e),void n.selectAll();break;case 27:return n.isOpen&&(C(e,!0),n.close()),void n.clearActiveItems();case 40:return!n.isOpen&&n.hasOptions?n.open():!n.activeOption||(t=n.getAdjacent(n.activeOption,1))&&n.setActiveOption(t),void C(e);case 38:return!n.activeOption||(t=n.getAdjacent(n.activeOption,-1))&&n.setActiveOption(t),void C(e);case 13:return void(n.canSelect(n.activeOption)?(n.onOptionSelect(e,n.activeOption),C(e)):n.settings.create&&n.createItem()&&C(e));case 37:return void n.advanceSelection(-1,e);case 39:return void n.advanceSelection(1,e);case 9:return void(n.settings.selectOnTab&&(n.canSelect(n.activeOption)&&(n.onOptionSelect(e,n.activeOption),C(e)),n.settings.create&&n.createItem()&&C(e)));case 8:case 46:return void n.deleteSelection(e)}n.isInputHidden&&!x(z,e)&&C(e)}}},{key:"onInput",value:function(e){var t,n=this;n.isLocked||(t=n.inputValue(),n.lastValue!==t&&(n.lastValue=t,n.settings.shouldLoad.call(n,t)&&n.load(t),n.refreshOptions(),n.trigger("type",t)))}},{key:"onFocus",value:function(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),void C(e);t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.preload(),n||t.trigger("focus"),t.activeItems.length||(t.showInput(),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())}},{key:"onBlur",value:function(e){var t,n;!1===document.hasFocus()||(t=this).isFocused&&(t.isFocused=!1,t.ignoreFocus=!1,n=function(){t.close(),t.setActiveItem(),t.setCaret(t.items.length),t.trigger("blur")},t.settings.create&&t.settings.createOnBlur?t.createItem(null,!1,n):n())}},{key:"onOptionSelect",value:function(e,t){var n,i=this;t.parentElement&&t.parentElement.matches("[data-disabled]")||(t.classList.contains("create")?i.createItem(null,!0,function(){i.settings.closeAfterSelect&&i.close()}):void 0!==(n=t.dataset.value)&&(i.lastQuery=null,i.addItem(n),i.settings.closeAfterSelect&&i.close(),!i.settings.hideSelected&&e.type&&/click/.test(e.type)&&i.setActiveOption(t)))}},{key:"canSelect",value:function(e){return!!(this.isOpen&&e&&this.dropdown_content.contains(e))}},{key:"onItemSelect",value:function(e,t){return!this.isLocked&&"multi"===this.settings.mode&&(C(e),this.setActiveItem(t,e),!0)}},{key:"canLoad",value:function(e){return!!this.settings.load&&!this.loadedSearches.hasOwnProperty(e)}},{key:"load",value:function(e){var t,n=this;n.canLoad(e)&&(w(n.wrapper,n.settings.loadingClass),n.loading++,t=n.loadCallback.bind(n),n.settings.load.call(n,e,t))}},{key:"loadCallback",value:function(e,t){var n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(e,t),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||_(n.wrapper,n.settings.loadingClass),n.trigger("load",e,t)}},{key:"preload",value:function(){var e=this.wrapper.classList;e.contains("preloaded")||(e.add("preloaded"),this.load(""))}},{key:"setTextboxValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this.control_input;t.value!==e&&(t.value=e,n(t,"update"),this.lastValue=e)}},{key:"getValue",value:function(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}},{key:"setValue",value:function(e,t){var n=this;I(this,t?[]:["change"],function(){n.clear(t),n.addItems(e,t)})}},{key:"setMaxItems",value:function(e){this.settings.maxItems=e=0===e?null:e,this.refreshState()}},{key:"setActiveItem",value:function(e,t){var n,i,o,r,s,a=this;if("single"!==a.settings.mode){if(!e)return a.clearActiveItems(),void(a.isFocused&&a.showInput());if("click"===(n=t&&t.type.toLowerCase())&&x("shiftKey",t)&&a.activeItems.length){for(s=a.getLastActive(),(o=Array.prototype.indexOf.call(a.control.children,s))>(r=Array.prototype.indexOf.call(a.control.children,e))&&(s=o,o=r,r=s),i=o;i<=r;i++)e=a.control.children[i],-1===a.activeItems.indexOf(e)&&a.setActiveItemClass(e);C(t)}else"click"===n&&x(z,t)||"keydown"===n&&x("shiftKey",t)?e.classList.contains("active")?a.removeActiveItem(e):a.setActiveItemClass(e):(a.clearActiveItems(),a.setActiveItemClass(e));a.hideInput(),a.isFocused||a.focus()}}},{key:"setActiveItemClass",value:function(e){var t=this.control.querySelector(".last-active");t&&_(t,"last-active"),w(e,"active last-active"),this.trigger("item_select",e),-1==this.activeItems.indexOf(e)&&this.activeItems.push(e)}},{key:"removeActiveItem",value:function(e){var t=this.activeItems.indexOf(e);this.activeItems.splice(t,1),_(e,"active")}},{key:"clearActiveItems",value:function(){_(this.activeItems,"active"),this.activeItems=[]}},{key:"setActiveOption",value:function(e){e!==this.activeOption&&(this.clearActiveOption(),e&&(this.activeOption=e,S(this.focus_node,{"aria-activedescendant":e.getAttribute("id")}),S(e,{"aria-selected":"true"}),w(e,"active"),this.scrollToOption(e)))}},{key:"scrollToOption",value:function(e,t){var n,i,o,r;e&&(n=(r=this.dropdown_content).clientHeight,i=r.scrollTop||0,o=e.offsetHeight,n+i<(r=e.getBoundingClientRect().top-r.getBoundingClientRect().top+i)+o?this.scroll(r-n+o,t):r<i&&this.scroll(r,t))}},{key:"scroll",value:function(e,t){var n=this.dropdown_content;t&&(n.style.scrollBehavior=t),n.scrollTop=e,n.style.scrollBehavior=""}},{key:"clearActiveOption",value:function(){this.activeOption&&(_(this.activeOption,"active"),S(this.activeOption,{"aria-selected":null})),this.activeOption=null,S(this.focus_node,{"aria-activedescendant":null})}},{key:"selectAll",value:function(){var e;"single"===this.settings.mode||(e=this.controlChildren()).length&&(this.hideInput(),this.close(),this.activeItems=e,w(e,"active"))}},{key:"inputState",value:function(){var e=this;e.control.contains(e.control_input)&&(S(e.control_input,{placeholder:e.settings.placeholder}),0<e.activeItems.length||!e.isFocused&&e.settings.hidePlaceholder&&0<e.items.length?(e.setTextboxValue(),e.isInputHidden=!0):(e.settings.hidePlaceholder&&0<e.items.length&&S(e.control_input,{placeholder:""}),e.isInputHidden=!1),e.wrapper.classList.toggle("input-hidden",e.isInputHidden))}},{key:"hideInput",value:function(){this.inputState()}},{key:"showInput",value:function(){this.inputState()}},{key:"inputValue",value:function(){return this.control_input.value.trim()}},{key:"focus",value:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,(e.control_input.offsetWidth?e.control_input:e.focus_node).focus(),setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))}},{key:"blur",value:function(){this.focus_node.blur(),this.onBlur()}},{key:"getScoreFunction",value:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())}},{key:"getSearchOptions",value:function(){var e=this.settings,t=e.sortField;return"string"==typeof e.sortField&&(t=[{field:e.sortField}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}}},{key:"search",value:function(e){var t,n,i,o=this,r=this.getSearchOptions();if(o.settings.score&&"function"!=typeof(i=o.settings.score.call(o,e)))throw new Error('Tom Select "score" setting must be a function that returns a function');if(e!==o.lastQuery?(o.lastQuery=e,n=o.sifter.search(e,Object.assign(r,{score:i})),o.currentResults=n):n=Object.assign({},o.currentResults),o.settings.hideSelected)for(t=n.items.length-1;0<=t;t--){var s=M(n.items[t].id);s&&-1!==o.items.indexOf(s)&&n.items.splice(t,1)}return n}},{key:"refreshOptions",value:function(){var e,t,n,i,o,r,s,a,l,u,c=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],d={},p=[],f=this,h=f.inputValue(),g=f.search(h),v=f.activeOption,m=f.settings.shouldOpen||!1,y=f.dropdown_content;for(v&&(a=v.dataset.value,l=v.closest("[data-group]")),i=g.items.length,0<(i="number"==typeof f.settings.maxOptions?Math.min(i,f.settings.maxOptions):i)&&(m=!0),e=0;e<i;e++){var O=g.items[e].id,b=f.options[O],w=f.getOption(O,!0);for(f.settings.hideSelected||w.classList.toggle("selected",f.items.includes(O)),o=b[f.settings.optgroupField]||"",t=0,n=(r=Array.isArray(o)?o:[o])&&r.length;t<n;t++)o=r[t],f.optgroups.hasOwnProperty(o)||(o=""),d.hasOwnProperty(o)||(d[o]=document.createDocumentFragment(),p.push(o)),0<t&&(w=w.cloneNode(!0),S(w,{id:b.$id+"-clone-"+t,"aria-selected":null}),w.classList.add("ts-cloned"),_(w,"active")),a==O&&l&&l.dataset.group===o&&(v=w),d[o].appendChild(w)}this.settings.lockOptgroupOrder&&p.sort(function(e,t){return(f.optgroups[e]&&f.optgroups[e].$order||0)-(f.optgroups[t]&&f.optgroups[t].$order||0)}),s=document.createDocumentFragment(),q(p,function(e){var t,n;f.optgroups.hasOwnProperty(e)&&d[e].children.length?(n=document.createDocumentFragment(),t=f.render("optgroup_header",f.optgroups[e]),E(n,t),E(n,d[e]),n=f.render("optgroup",{group:f.optgroups[e],options:n}),E(s,n)):E(s,d[e])}),y.innerHTML="",E(y,s),f.settings.highlight&&(I=y.querySelectorAll("span.highlight"),Array.prototype.forEach.call(I,function(e){var t=e.parentNode;t.replaceChild(e.firstChild,e),t.normalize()}),g.query.length&&g.tokens.length&&q(g.tokens,function(e){A(y,e.regex)}));function k(e){return(e=f.render(e,{input:h}))&&(m=!0,y.insertBefore(e,y.firstChild)),e}var I;f.loading?k("loading"):f.settings.shouldLoad.call(f,h)?0===g.items.length&&k("no_results"):k("not_loading"),(I=f.canCreate(h))&&(u=k("option_create")),f.hasOptions=0<g.items.length||I,m?(0<g.items.length?(!y.contains(v)&&"single"===f.settings.mode&&f.items.length&&(v=f.getOption(f.items[0])),y.contains(v)||(I=0,u&&!f.settings.addPrecedence&&(I=1),v=f.selectable()[I])):u&&(v=u),c&&!f.isOpen&&(f.open(),f.scrollToOption(v,"auto")),f.setActiveOption(v)):(f.clearActiveOption(),c&&f.isOpen&&f.close(!1))}},{key:"selectable",value:function(){return this.dropdown_content.querySelectorAll("[data-selectable]")}},{key:"addOption",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this;if(Array.isArray(e))return n.addOptions(e,t),!1;var i=M(e[n.settings.valueField]);return null!==i&&!n.options.hasOwnProperty(i)&&(e.$order=e.$order||++n.order,e.$id=n.inputId+"-opt-"+e.$order,n.options[i]=e,n.lastQuery=null,t&&(n.userOptions[i]=t,n.trigger("option_add",i,e)),i)}},{key:"addOptions",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];q(e,function(e){t.addOption(e,n)})}},{key:"registerOption",value:function(e){return this.addOption(e)}},{key:"registerOptionGroup",value:function(e){var t=M(e[this.settings.optgroupValueField]);return null!==t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)}},{key:"addOptionGroup",value:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)}},{key:"removeOptionGroup",value:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.clearCache(),this.trigger("optgroup_remove",e))}},{key:"clearOptionGroups",value:function(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}},{key:"updateOption",value:function(e,t){var n=this,i=M(e),o=M(t[n.settings.valueField]);if(null!==i&&n.options.hasOwnProperty(i)){if("string"!=typeof o)throw new Error("Value must be set in option data");var r=n.getOption(i),s=n.getItem(i);t.$order=t.$order||n.options[i].$order,delete n.options[i],n.uncacheValue(o),n.options[o]=t,r&&(n.dropdown_content.contains(r)&&(e=n._render("option",t),m(r,e),n.activeOption===r&&n.setActiveOption(e)),r.remove()),s&&(-1!==(i=n.items.indexOf(i))&&n.items.splice(i,1,o),t=n._render("item",t),s.classList.contains("active")&&w(t,"active"),m(s,t)),n.lastQuery=null}}},{key:"removeOption",value:function(e,t){var n=this;e=y(e),n.uncacheValue(e),delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)}},{key:"clearOptions",value:function(){var n=this;this.loadedSearches={},this.userOptions={},this.clearCache();var i={};q(this.options,function(e,t){0<=n.items.indexOf(t)&&(i[t]=n.options[t])}),this.options=this.sifter.items=i,this.lastQuery=null,this.trigger("option_clear")}},{key:"getOption",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=M(e);if(null!==e&&this.options.hasOwnProperty(e)){e=this.options[e];if(e.$div)return e.$div;if(t)return this._render("option",e)}return null}},{key:"getAdjacent",value:function(e,t){if(!e)return null;for(var n="item"==(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"option")?this.controlChildren():this.dropdown_content.querySelectorAll("[data-selectable]"),i=0;i<n.length;i++)if(n[i]==e)return 0<t?n[i+1]:n[i-1];return null}},{key:"getItem",value:function(e){if("object"==te(e))return e;e=M(e);return null!==e?this.control.querySelector('[data-value="'.concat(L(e),'"]')):null}},{key:"addItems",value:function(e,t){for(var n=this,i=Array.isArray(e)?e:[e],o=0,r=(i=i.filter(function(e){return-1===n.items.indexOf(e)})).length;o<r;o++)n.isPending=o<r-1,n.addItem(i[o],t)}},{key:"addItem",value:function(s,a){var l=this;I(this,a?[]:["change","dropdown_close"],function(){var e,t,n,i=l,o=i.settings.mode,r=M(s);r&&-1!==i.items.indexOf(r)&&("single"===o&&i.close(),"single"===o||!i.settings.duplicates)||null===r||!i.options.hasOwnProperty(r)||("single"===o&&i.clear(a),"multi"===o&&i.isFull())||(n=i._render("item",i.options[r]),i.control.contains(n)&&(n=n.cloneNode(!0)),e=i.isFull(),i.items.splice(i.caretPos,0,r),i.insertAtCaret(n),i.isSetup&&(!i.isPending&&i.settings.hideSelected&&(t=i.getOption(r),(t=i.getAdjacent(t,1))&&i.setActiveOption(t)),i.isPending||i.settings.closeAfterSelect||i.refreshOptions(i.isFocused&&"single"!==o),0!=i.settings.closeAfterSelect&&i.isFull()?i.close():i.isPending||i.positionDropdown(),i.trigger("item_add",r,n),i.isPending||i.updateOriginalInput({silent:a})),i.isPending&&(e||!i.isFull())||(i.inputState(),i.refreshState()))})}},{key:"removeItem",value:function(){var e,t,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,o=1<arguments.length?arguments[1]:void 0,r=this;(i=r.getItem(i))&&(t=i.dataset.value,n=v(i),i.remove(),i.classList.contains("active")&&(e=r.activeItems.indexOf(i),r.activeItems.splice(e,1),_(i,"active")),r.items.splice(n,1),r.lastQuery=null,!r.settings.persist&&r.userOptions.hasOwnProperty(t)&&r.removeOption(t,o),n<r.caretPos&&r.setCaret(r.caretPos-1),r.updateOriginalInput({silent:o}),r.refreshState(),r.positionDropdown(),r.trigger("item_remove",t,i))}},{key:"createItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},i=this,o=i.caretPos,e=e||i.inputValue();if(!i.canCreate(e))return n(),!1;i.lock();function t(e){if(i.unlock(),!e||"object"!=te(e))return n();var t=M(e[i.settings.valueField]);if("string"!=typeof t)return n();i.setTextboxValue(),i.addOption(e,!0),i.setCaret(o),i.addItem(t),n(e),r=!0}var r=!1,s="function"==typeof i.settings.create?i.settings.create.call(this,e,t):(J(s={},i.settings.labelField,e),J(s,i.settings.valueField,e),s);return r||t(s),!0}},{key:"refreshItems",value:function(){var e=this;e.lastQuery=null,e.isSetup&&e.addItems(e.items),e.updateOriginalInput(),e.refreshState()}},{key:"refreshState",value:function(){var e=this;e.refreshValidityState();var t=e.isFull(),n=e.isLocked;e.wrapper.classList.toggle("rtl",e.rtl);var i=e.wrapper.classList;i.toggle("focus",e.isFocused),i.toggle("disabled",e.isDisabled),i.toggle("required",e.isRequired),i.toggle("invalid",!e.isValid),i.toggle("locked",n),i.toggle("full",t),i.toggle("input-active",e.isFocused&&!e.isInputHidden),i.toggle("dropdown-active",e.isOpen),i.toggle("has-options",(t=e.options,0===Object.keys(t).length)),i.toggle("has-items",0<e.items.length)}},{key:"refreshValidityState",value:function(){var e=this;e.input.checkValidity&&(e.isValid=e.input.checkValidity(),e.isInvalid=!e.isValid)}},{key:"isFull",value:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems}},{key:"updateOriginalInput",value:function(){var t,n,i,o,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=this,s=r.input.querySelector('option[value=""]');r.is_select_tag?(i=function(e,t,n){return(e=e||h('<option value="'+O(t)+'">'+O(n)+"</option>"))!=s&&r.input.append(e),o.push(e),e.selected=!0,e},o=[],r.input.querySelectorAll("option:checked").forEach(function(e){e.selected=!1}),0==r.items.length&&"single"==r.settings.mode?i(s,"",""):r.items.forEach(function(e){t=r.options[e],n=t[r.settings.labelField]||"",o.includes(t.$option)?i(r.input.querySelector('option[value="'.concat(L(e),'"]:not(:checked)')),e,n):t.$option=i(t.$option,e,n)})):r.input.value=r.getValue(),r.isSetup&&(e.silent||r.trigger("change",r.getValue()))}},{key:"open",value:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.isOpen=!0,S(e.focus_node,{"aria-expanded":"true"}),e.refreshState(),i(e.dropdown,{visibility:"hidden",display:"block"}),e.positionDropdown(),i(e.dropdown,{visibility:"visible",display:"block"}),e.focus(),e.trigger("dropdown_open",e.dropdown))}},{key:"close",value:function(){var e=this,t=e.isOpen;0<arguments.length&&void 0!==arguments[0]&&!arguments[0]||(e.setTextboxValue(),"single"===e.settings.mode&&e.items.length&&e.hideInput()),e.isOpen=!1,S(e.focus_node,{"aria-expanded":"false"}),i(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),t&&e.trigger("dropdown_close",e.dropdown)}},{key:"positionDropdown",value:function(){var e,t,n;"body"===this.settings.dropdownParent&&(e=(n=this.control).getBoundingClientRect(),t=n.offsetHeight+e.top+window.scrollY,n=e.left+window.scrollX,i(this.dropdown,{width:e.width+"px",top:t+"px",left:n+"px"}))}},{key:"clear",value:function(e){var t,n=this;n.items.length&&(t=n.controlChildren(),q(t,function(e){n.removeItem(e,!0)}),n.showInput(),e||n.updateOriginalInput(),n.trigger("clear"))}},{key:"insertAtCaret",value:function(e){var t=this.caretPos,n=this.control;n.insertBefore(e,n.children[t]),this.setCaret(t+1)}},{key:"deleteSelection",value:function(e){var t,n=this,i=e&&8===e.keyCode?-1:1,o={start:(o=n.control_input).selectionStart||0,length:(o.selectionEnd||0)-(o.selectionStart||0)},r=[];n.activeItems.length?(t=g(n.activeItems,i),t=v(t),0<i&&t++,q(n.activeItems,function(e){return r.push(e)})):(n.isFocused||"single"===n.settings.mode)&&n.items.length&&(s=n.controlChildren(),i<0&&0===o.start&&0===o.length?r.push(s[n.caretPos-1]):0<i&&o.start===n.inputValue().length&&r.push(s[n.caretPos]));var s=r.map(function(e){return e.dataset.value});if(!s.length||"function"==typeof n.settings.onDelete&&!1===n.settings.onDelete.call(n,s,e))return!1;for(C(e,!0),void 0!==t&&n.setCaret(t);r.length;)n.removeItem(r.pop());return n.showInput(),n.positionDropdown(),n.refreshOptions(!1),!0}},{key:"advanceSelection",value:function(e,t){var n,i=this;i.rtl&&(e*=-1),i.inputValue().length||(x(z,t)||x("shiftKey",t)?(t=(n=i.getLastActive(e))?n.classList.contains("active")?i.getAdjacent(n,e,"item"):n:0<e?i.control_input.nextElementSibling:i.control_input.previousElementSibling)&&(t.classList.contains("active")&&i.removeActiveItem(n),i.setActiveItemClass(t)):i.moveCaret(e))}},{key:"moveCaret",value:function(e){}},{key:"getLastActive",value:function(e){var t=this.control.querySelector(".last-active");if(t)return t;t=this.control.querySelectorAll(".active");return t?g(t,e):void 0}},{key:"setCaret",value:function(e){this.caretPos=this.items.length}},{key:"controlChildren",value:function(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}},{key:"lock",value:function(){this.isLocked=!0,this.refreshState()}},{key:"unlock",value:function(){this.isLocked=!1,this.refreshState()}},{key:"disable",value:function(){var e=this;e.input.disabled=!0,e.control_input.disabled=!0,e.focus_node.tabIndex=-1,e.isDisabled=!0,this.close(),e.lock()}},{key:"enable",value:function(){var e=this;e.input.disabled=!1,e.control_input.disabled=!1,e.focus_node.tabIndex=e.tabIndex,e.isDisabled=!1,e.unlock()}},{key:"destroy",value:function(){var e=this,t=e.revertSettings;e.trigger("destroy"),e.off(),e.wrapper.remove(),e.dropdown.remove(),e.input.innerHTML=t.innerHTML,e.input.tabIndex=t.tabIndex,_(e.input,"tomselected","ts-hidden-accessible"),e._destroy(),delete e.input.tomselect}},{key:"render",value:function(e,t){return"function"!=typeof this.settings.render[e]?null:this._render(e,t)}},{key:"_render",value:function(e,t){var n,i,o="",r=this;return"option"!==e&&"item"!=e||(o=y(t[r.settings.valueField])),null==(i=r.settings.render[e].call(this,t,O))||(i=h(i),"option"===e||"option_create"===e?t[r.settings.disabledField]?S(i,{"aria-disabled":"true"}):S(i,{"data-selectable":""}):"optgroup"===e&&(n=t.group[r.settings.optgroupValueField],S(i,{"data-group":n}),t.group[r.settings.disabledField]&&S(i,{"data-disabled":""})),"option"!==e&&"item"!==e||(S(i,{"data-value":o}),"item"===e?(w(i,r.settings.itemClass),S(i,{"data-ts-item":""})):(w(i,r.settings.optionClass),S(i,{role:"option",id:t.$id}),r.options[o].$div=i))),i}},{key:"clearCache",value:function(){q(this.options,function(e,t){e.$div&&(e.$div.remove(),delete e.$div)})}},{key:"uncacheValue",value:function(e){e=this.getOption(e);e&&e.remove()}},{key:"canCreate",value:function(e){return this.settings.create&&0<e.length&&this.settings.createFilter.call(this,e)}},{key:"hook",value:function(n,e,i){var o=this,r=o[e];o[e]=function(){var e,t;return"after"===n&&(e=r.apply(o,arguments)),t=i.apply(o,arguments),"instead"===n?t:e="before"===n?r.apply(o,arguments):e}}}]),p}(((Q=e).plugins={},function(){U(r,Q);var o=W(r);function r(){var e;Z(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=o.call.apply(o,[this].concat(n))).plugins={names:[],settings:{},requested:{},loaded:{}},e}return ee(r,[{key:"initializePlugins",value:function(e){var t,n,i=this,o=[];if(Array.isArray(e))e.forEach(function(e){"string"==typeof e?o.push(e):(i.plugins.settings[e.name]=e.options,o.push(e.name))});else if(e)for(t in e)e.hasOwnProperty(t)&&(i.plugins.settings[t]=e[t],o.push(t));for(;n=o.shift();)i.require(n)}},{key:"loadPlugin",value:function(e){var t=this.plugins,n=Q.plugins[e];if(!Q.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');t.requested[e]=!0,t.loaded[e]=n.fn.apply(this,[this.plugins.settings[e]||{}]),t.names.push(e)}},{key:"require",value:function(e){var t=this.plugins;if(!this.plugins.loaded.hasOwnProperty(e)){if(t.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');this.loadPlugin(e)}return t.loaded[e]}}],[{key:"define",value:function(e,t){Q.plugins[e]={name:e,fn:t}}}]),r}()))},"object"==te(t)&&void 0!==e?e.exports=i():void 0===(i="function"==typeof(i=i)?i.call(t,n,t,e):i)||(e.exports=i)}}]);